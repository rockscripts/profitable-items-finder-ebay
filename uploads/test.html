$id_order


if($result):
                //valid 
                $output_transactions = array();	
                $index = 0;				
				$this->Orders_model->update_app_verified_status($id_order);
				$data["message"] = "Thank you. Order has been verified successfully."; 
				$order_transactions = $this->Orders_model->get_orders_transactions($id_order); 
				$no_in_stock = array();
				$j = 0;
				foreach($order_transactions as $order_transaction):
				  if($order_transaction->shipped=="false")//prevent shipp new keys if user reload this function				  
				   $result = $this->Orders_model->update_digital_item_cd_keys_status($order_transaction->delivery_id, $order_transaction->transactionID, "true", $order_transaction->QuantityPurchased);			   
				  if($result==false):
				   /*Notify to admin - There is not enought keys available*/	
                    $no_in_stock[$j]["Title"] = $order_transaction->Title;
                    $j++;				
				 endif;
				    $output_transactions[$index]["ItemID"] =  $order_transaction->ItemID;
					$output_transactions[$index]["Title"]  =  $order_transaction->Title;
					$output_transactions[$index]["Keys"]   = $this->Orders_model->get_orders_transaction_keys($order_transaction->transactionID, $order_transaction->delivery_id);	
				 $index++;
				endforeach;
				if(sizeof($no_in_stock)>0):
				 $this->notify_to_admin_out_stock($id_order, $no_in_stock);  
				 else:
				 /*send keys and invoice to buyer email*/
				 $this->send_invoice_keys_to_buyer($id_order);
				 /*Notify to admin - order shipped successfully*/
				 $this->notify_to_admin_order_shipped($id_order);
				 
				 $this->Orders_model->update_shipped_status($id_order);
				endif;
				$data["orders_transaction_keys"] = $output_transactions;
                $this->template->load('display_orders_transactions_keys',$data);